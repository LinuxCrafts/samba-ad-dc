# DO NOT EDIT THIS FILE.
# PLACE YOUR CONFIG UNDER /samba/etc/smb.conf.d/

[global]
    # Samba and Active Directory settings
    server role = active directory domain controller
    server string = Samba4 ADS DC Server
    

    # Disable NetBIOS and WINS server
    disable netbios = yes
    wins support = no
    smb ports = 445
    rpc server dynamic port range = 50000-55000

    # LDAP Settings
    ldap server require strong auth = no
    idmap_ldb:use rfc2307 = yes

    # File system and file sharing settings
    vfs objects = dfs_samba4, acl_xattr, full_audit
    map acl inherit = yes
    store dos attributes = yes
    acl allow execute always = true


    # Changing default directories
    cache directory = /samba/cache
    lock directory = /samba/lock
    private dir = /samba/private
    state directory = /samba/state
    

    # Log files
    log level = 1 \
        auth_json_audit:3@/samba/log/auth_json_audit.log \
        dsdb_json_audit:5@/samba/log/dsdb_json_audit.log \
        dsdb_password_json_audit:9@/samba/log/dsdb_password_json_audit.log \
        dsdb_group_json_audit:9@/samba/log/dsdb_group_json_audit.log \
        kerberos:3@/samba/log/kerberos.log \
        dns:0

    # Sysvol write log
    full_audit:failure = none
    full_audit:success = pwrite write renameat
    full_audit:prefix = IP=%I|USER=%u|MACHINE=%m|VOLUME=%S
    full_audit:facility = local7
    full_audit:priority = NOTICE

    max log size = 10240       

    # NTPD Secure socket dir
    ntp signd socket directory = /ntp_signd

    # DNS backend settings
    allow dns updates = nonsecure
    binddns dir = /bind-dns

    # Disable printers
    printcap name = /dev/null
    load printers = no
    printing = bsd



    include = /samba/etc/smb.conf.d/includes

